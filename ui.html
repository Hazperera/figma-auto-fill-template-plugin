<!DOCTYPE html>
<html>
<body>
  <div id="form"></div>
  <button id="send">Apply</button>

  <script src="config.js"></script>
  <script>
    const form = document.getElementById("form");

    fields.forEach(field => {
      const wrapper = document.createElement("p");
      wrapper.innerHTML = `${field.label}: <input id="${field.id}" type="${field.type}" />`;
      form.appendChild(wrapper);
    });

    document.getElementById("send").onclick = () => {
      const message = { type: "apply-content" };
      fields.forEach(field => {
        message[field.id] = document.getElementById(field.id).value;
      });
      parent.postMessage({ pluginMessage: message }, "*");
    };
  </script>
</body>
</html>
